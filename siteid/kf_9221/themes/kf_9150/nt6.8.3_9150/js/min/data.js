!function(a,b){a.data={start:function(a){return this.get(a)},get:function(b){var c=a.getTime(),d="\\[where\\{(\\d+)\\s*,\\s*(\\-?\\d+)\\}\\]$",e={};if(b=a.extend({},CON_RULE,b),"undefined"!=typeof b&&!a.isEmptyObject(b))return a.each(b,function(b,c){var f;try{f=new RegExp(b,"gi")}catch(g){}return f&&f.test(a.url)?(a.Log("Y-RegExp: "+b),void a.each(c,function(b,c){if(a.isArray(c))for(var f=0;f<c.length;f++)if(a.Log(b+"["+c[f].root+"]: "+a.JSON.toJSONString(c[f])),c[f].root||a.inArray(b,["cartprice"])!==!1){var g,h=c[f].root,i=new RegExp(d,"gi"),j=new RegExp(d,"gi");if(i.test(h)){var k=j.exec(h),l=k?parseFloat(k[1]):0,m=k?parseFloat(k[2]):0;h=h.replace(j,""),g=a(h).slice(l,m)}else g=a(h);if(!g.length){a.base._reload_trail=!0;continue}a.base._reload_trail=!1,e.ntalkerparam||(e.ntalkerparam={items:[]});for(var n=0,o=g.length;n<o;n++)e.ntalkerparam.items[n]||(e.ntalkerparam.items[n]={}),e.ntalkerparam.items[n][b]=a.data.getFieldData(c[n].root,n,b,c[n])}else a.inArray(b,["uid","uname","userlevel","erpparam","bland","category","orderid","orderprice"])<=-1?(e.ntalkerparam||(e.ntalkerparam={item:{}}),e.ntalkerparam.item[b]=a.data.getFieldData("html",0,b,c[f])):e[b]=a.data.getFieldData("html",0,b,c[f])})):void a.Log("N-RegExp: "+b)}),a.Log("nTalk.data.get() exec time "+(a.getTime()-c)+" ms",1),e},getFieldData:function(b,c,d,e){var f;if(a.isEmptyObject(e))return"";switch(e.type.toLowerCase()){case"global":f=this.getVariable(window,e.name);break;case"cookie":f=a.cookie.get(e.name)||"";break;case"params":f=a.params[e.name]||"";break;case"hash":f=a.hashParams[e.name]||"";break;case"reg":f=this.verificationReg(e);break;case"url":f=window.location[e.name];break;case"attr":case"link-reg":case"attr-reg":f=this.verificationAttrReg(b,c,e);break;default:f=this.verificationHtml(b,c,e)}return a.Log("return:"+a.JSON.toJSONString(f)),f},verificationReg:function(a){var b,c;return b=new RegExp(a.regular.replace(/\\\\/gi,"\\"),"gi"),c=b.exec(location.pathname+location.search+location.hash),c&&c[a.rindex]?c[a.rindex]:""},verificationAttrReg:function(b,c,d){var e,f,g;return e=a(b).eq(c),d.selector&&(e=e.find(d.selector).eq(a.isNumeric(d.sindex)?d.sindex:0)),f=e.attr(d.name),d.regular?(g=new RegExp(d.regular,"gi"),match=g.exec(f),match?match[d.rindex]:null):this.toFullURI(f)},toFullURI:function(a){return a=a||"",/^\?/gi.test(a)?document.pageURI+a:/^(\/)/gi.test(a)?location.protocol+"//"+document.domain+a:a},verificationHtml:function(b,c,d){var e;return e=a(b).eq(c),d.selector&&(e=e.find(d.selector).eq(a.isNumeric(d.sindex)?d.sindex:0)),this.clearHtmlNode(e.html())},getVariable:function(a,b){if(b&&b.indexOf(".")>1)for(var c=b.split("."),d=0;d<c.length;d++)c[d]&&""!==c[d]&&(a=a[c[d]]||"");else b&&(a=a[b]||"");return a},clearHtmlNode:function(a){var b=/(<.*?\>(.*?)<\/.*?\>)/gi,c=/[\r\n(^\s+)(\s+$)]/gi,d=/<!--(.*?)--\>/gi;return a.replace(b,"").replace(c,"").replace(d,"")}}}(nTalk);